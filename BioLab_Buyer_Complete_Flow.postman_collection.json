{
  "info": {
    "_postman_id": "ee297a79-dc12-4c12-9e00-3e406b8748d9",
    "name": "BioLab \u2014 Buyer Complete Flow",
    "description": "Complete Buyer flow: Register \u2192 Login \u2192 Profile \u2192 Browse Catalog \u2192 Submit Service Request \u2192 Track Projects \u2192 Review Documents \u2192 Pay Invoices \u2192 Messages \u2192 Notifications \u2192 Logout",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "refreshToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "mfaToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "registeredUserId",
      "value": "",
      "type": "string"
    },
    {
      "key": "roleId",
      "value": "",
      "type": "string"
    },
    {
      "key": "permissionId",
      "value": "",
      "type": "string"
    },
    {
      "key": "organizationId",
      "value": "",
      "type": "string"
    },
    {
      "key": "projectId",
      "value": "",
      "type": "string"
    },
    {
      "key": "serviceId",
      "value": "",
      "type": "string"
    },
    {
      "key": "categoryId",
      "value": "",
      "type": "string"
    },
    {
      "key": "serviceRequestId",
      "value": "",
      "type": "string"
    },
    {
      "key": "invoiceId",
      "value": "",
      "type": "string"
    },
    {
      "key": "documentId",
      "value": "",
      "type": "string"
    },
    {
      "key": "conversationId",
      "value": "",
      "type": "string"
    },
    {
      "key": "notificationId",
      "value": "",
      "type": "string"
    },
    {
      "key": "milestoneId",
      "value": "",
      "type": "string"
    },
    {
      "key": "sessionId",
      "value": "",
      "type": "string"
    },
    {
      "key": "targetUserId",
      "value": "",
      "type": "string"
    },
    {
      "key": "buyerEmail",
      "value": "buyer@pharmaco.com",
      "type": "string"
    },
    {
      "key": "buyerPassword",
      "value": "Buyer@123456",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "1. Authentication",
      "item": [
        {
          "name": "Register as Buyer",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            },
            "description": "Self-register as a buyer",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"buyer@pharmaco.com\",\n  \"password\": \"Buyer@123456\",\n  \"firstName\": \"Alice\",\n  \"lastName\": \"Buyer\",\n  \"phone\": \"+1-555-2000\",\n  \"role\": \"BUYER\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.id) {",
                  "    pm.collectionVariables.set('registeredUserId', jsonData.id);",
                  "}",
                  "pm.test('Registration successful', function() {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Login as Buyer",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            },
            "description": "Login and get JWT tokens",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{buyerEmail}}\",\n  \"password\": \"{{buyerPassword}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.accessToken) {",
                  "    pm.collectionVariables.set('accessToken', jsonData.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', jsonData.refreshToken);",
                  "}",
                  "if (jsonData.mfaRequired) {",
                  "    pm.collectionVariables.set('mfaToken', jsonData.mfaToken);",
                  "}",
                  "pm.test('Login successful', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Verify MFA (if required)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/mfa/verify",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "mfa",
                "verify"
              ]
            },
            "description": "Verify MFA if required",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"mfaToken\": \"{{mfaToken}}\",\n  \"code\": \"123456\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.accessToken) {",
                  "    pm.collectionVariables.set('accessToken', jsonData.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', jsonData.refreshToken);",
                  "}",
                  "if (jsonData.mfaRequired) {",
                  "    pm.collectionVariables.set('mfaToken', jsonData.mfaToken);",
                  "}",
                  "pm.test('Login successful', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "2. Profile Management",
      "item": [
        {
          "name": "Get My Profile",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/users/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "me"
              ]
            },
            "description": "Get current buyer profile"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.id) { pm.collectionVariables.set('userId', jsonData.id); }",
                  "if (jsonData.organizations && jsonData.organizations.length > 0) {",
                  "    pm.collectionVariables.set('organizationId', jsonData.organizations[0].organizationId);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Update My Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/users/{userId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "{userId}"
              ]
            },
            "description": "Update profile information",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Alice\",\n  \"lastName\": \"Buyer\",\n  \"phone\": \"+1-555-2001\",\n  \"avatarUrl\": \"https://cdn.biolab.com/avatars/alice.png\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "View My Organization",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/organizations/{organizationId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "organizations",
                "{organizationId}"
              ]
            },
            "description": "View my organization details"
          },
          "response": []
        },
        {
          "name": "View My Roles",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/users/{userId}/roles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "{userId}",
                "roles"
              ]
            },
            "description": "View assigned roles"
          },
          "response": []
        }
      ]
    },
    {
      "name": "3. Browse Service Catalog",
      "item": [
        {
          "name": "List Categories",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/catalog/categories",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "catalog",
                "categories"
              ]
            },
            "description": "Browse service categories"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = pm.response.json();",
                  "var items = jsonData.content || jsonData;",
                  "if (items && items.length > 0 && items[0].id) { pm.collectionVariables.set('categoryId', items[0].id); }",
                  "pm.test('Status 200', function() { pm.response.to.have.status(200); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Browse Services",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/catalog/services?page=0&size=20",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "catalog",
                "services?page=0&size=20"
              ]
            },
            "description": "Browse the public service catalog"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = pm.response.json();",
                  "var items = jsonData.content || jsonData;",
                  "if (items && items.length > 0 && items[0].id) { pm.collectionVariables.set('serviceId', items[0].id); }",
                  "pm.test('Status 200', function() { pm.response.to.have.status(200); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Search Services by Category",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/catalog/services?categoryId={categoryId}&page=0&size=20",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "catalog",
                "services?categoryId={categoryId}&page=0&size=20"
              ]
            },
            "description": "Filter services by category"
          },
          "response": []
        },
        {
          "name": "Search Services by Keyword",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/catalog/services?q=enzyme&page=0&size=20",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "catalog",
                "services?q=enzyme&page=0&size=20"
              ]
            },
            "description": "Search services by keyword"
          },
          "response": []
        },
        {
          "name": "Get Service Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/catalog/services/{serviceId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "catalog",
                "services",
                "{serviceId}"
              ]
            },
            "description": "View detailed service info, pricing, methodology"
          },
          "response": []
        }
      ]
    },
    {
      "name": "4. Submit Service Request",
      "item": [
        {
          "name": "Submit Service Request",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/catalog/requests",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "catalog",
                "requests"
              ]
            },
            "description": "Submit a request for a service from the catalog",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"serviceId\": \"{{serviceId}}\",\n  \"sampleType\": \"Purified enzyme extract\",\n  \"timeline\": \"2 weeks\",\n  \"requirements\": \"Full Michaelis-Menten kinetics with inhibitor analysis\",\n  \"priority\": \"HIGH\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.id) { pm.collectionVariables.set('serviceRequestId', jsonData.id); }",
                  "pm.test('Status 201', function() { pm.response.to.have.status(201); });"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "5. Track Projects",
      "item": [
        {
          "name": "List My Projects",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/projects?page=0&size=20",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects?page=0&size=20"
              ]
            },
            "description": "List projects for my org"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = pm.response.json();",
                  "var items = jsonData.content || jsonData;",
                  "if (items && items.length > 0 && items[0].id) { pm.collectionVariables.set('projectId', items[0].id); }",
                  "pm.test('Status 200', function() { pm.response.to.have.status(200); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Project Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/projects/{projectId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects",
                "{projectId}"
              ]
            },
            "description": "View project details with milestones"
          },
          "response": []
        },
        {
          "name": "List Milestones",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/projects/{projectId}/milestones",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects",
                "{projectId}",
                "milestones"
              ]
            },
            "description": "Track project milestones"
          },
          "response": []
        },
        {
          "name": "Project Statistics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/projects/stats",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects",
                "stats"
              ]
            },
            "description": "Project statistics for buyer"
          },
          "response": []
        }
      ]
    },
    {
      "name": "6. Document Access",
      "item": [
        {
          "name": "List Project Documents",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/documents/project/{projectId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "documents",
                "project",
                "{projectId}"
              ]
            },
            "description": "List documents for a project"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = pm.response.json();",
                  "var items = jsonData.content || jsonData;",
                  "if (items && items.length > 0 && items[0].id) { pm.collectionVariables.set('documentId', items[0].id); }",
                  "pm.test('Status 200', function() { pm.response.to.have.status(200); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Document Metadata",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/documents/{documentId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "documents",
                "{documentId}"
              ]
            },
            "description": "Get document metadata"
          },
          "response": []
        },
        {
          "name": "Download Document",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/documents/{documentId}/download",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "documents",
                "{documentId}",
                "download"
              ]
            },
            "description": "Download document file"
          },
          "response": []
        },
        {
          "name": "Upload Document",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/documents/project/{{projectId}}/upload",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "documents",
                "project",
                "{{projectId}}",
                "upload"
              ]
            },
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/path/to/requirements.pdf",
                  "description": "Document file to upload"
                }
              ]
            },
            "description": "Buyer uploads a document (e.g., requirements spec)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "7. Invoices & Payment",
      "item": [
        {
          "name": "List My Invoices (Buyer)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/invoices/buyer?page=0&size=20",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "invoices",
                "buyer?page=0&size=20"
              ]
            },
            "description": "List invoices received by my org"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = pm.response.json();",
                  "var items = jsonData.content || jsonData;",
                  "if (items && items.length > 0 && items[0].id) { pm.collectionVariables.set('invoiceId', items[0].id); }",
                  "pm.test('Status 200', function() { pm.response.to.have.status(200); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Invoice Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/invoices/{invoiceId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "invoices",
                "{invoiceId}"
              ]
            },
            "description": "View invoice with line items and tax"
          },
          "response": []
        },
        {
          "name": "Get Invoice by Number",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/invoices/number/INV-2026-001",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "invoices",
                "number",
                "INV-2026-001"
              ]
            },
            "description": "Lookup invoice by number"
          },
          "response": []
        },
        {
          "name": "Pay Invoice",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/invoices/{invoiceId}/pay",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "invoices",
                "{invoiceId}",
                "pay"
              ]
            },
            "description": "Mark invoice as paid"
          },
          "response": []
        },
        {
          "name": "Buyer Invoice Stats",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/invoices/stats/buyer",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "invoices",
                "stats",
                "buyer"
              ]
            },
            "description": "Buyer invoice statistics"
          },
          "response": []
        }
      ]
    },
    {
      "name": "8. Messaging",
      "item": [
        {
          "name": "List Conversations",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/messages/conversations",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "messages",
                "conversations"
              ]
            },
            "description": "List my conversations"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = pm.response.json();",
                  "var items = jsonData.content || jsonData;",
                  "if (items && items.length > 0 && items[0].id) { pm.collectionVariables.set('conversationId', items[0].id); }",
                  "pm.test('Status 200', function() { pm.response.to.have.status(200); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Conversation",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/messages/conversations?projectId={projectId}&title=Sample%20Submission%20Query",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "messages",
                "conversations?projectId={projectId}&title=Sample%20Submission%20Query"
              ]
            },
            "description": "Start a conversation about a project"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.id) { pm.collectionVariables.set('conversationId', jsonData.id); }",
                  "pm.test('Status 201', function() { pm.response.to.have.status(201); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Send Message",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/messages/conversations/{conversationId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "messages",
                "conversations",
                "{conversationId}"
              ]
            },
            "description": "Send message to supplier",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": \"When can I expect the preliminary results?\",\n  \"attachmentId\": null\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Read Messages",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/messages/conversations/{conversationId}?page=0&size=50",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "messages",
                "conversations",
                "{conversationId}?page=0&size=50"
              ]
            },
            "description": "Read conversation messages"
          },
          "response": []
        },
        {
          "name": "Mark as Read",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/messages/conversations/{conversationId}/read",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "messages",
                "conversations",
                "{conversationId}",
                "read"
              ]
            },
            "description": "Mark conversation as read"
          },
          "response": []
        }
      ]
    },
    {
      "name": "9. Notifications",
      "item": [
        {
          "name": "List Notifications",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/notifications?page=0&size=20",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications?page=0&size=20"
              ]
            },
            "description": "List my notifications"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = pm.response.json();",
                  "var items = jsonData.content || jsonData;",
                  "if (items && items.length > 0 && items[0].id) { pm.collectionVariables.set('notificationId', items[0].id); }",
                  "pm.test('Status 200', function() { pm.response.to.have.status(200); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Unread Count",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/unread-count",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications",
                "unread-count"
              ]
            },
            "description": "Get unread notification count"
          },
          "response": []
        },
        {
          "name": "Mark Notification as Read",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/{notificationId}/read",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications",
                "{notificationId}",
                "read"
              ]
            },
            "description": "Mark single notification as read"
          },
          "response": []
        },
        {
          "name": "Mark All as Read",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/read-all",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications",
                "read-all"
              ]
            },
            "description": "Mark all as read"
          },
          "response": []
        },
        {
          "name": "Get Preferences",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/preferences",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications",
                "preferences"
              ]
            },
            "description": "View notification preferences"
          },
          "response": []
        },
        {
          "name": "Update Preferences",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/preferences",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications",
                "preferences"
              ]
            },
            "description": "Update notification preferences",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"emailEnabled\": true,\n  \"projectUpdates\": true,\n  \"newMessages\": true,\n  \"invoiceReminders\": true,\n  \"securityAlerts\": true,\n  \"marketing\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "10. Password & Sessions",
      "item": [
        {
          "name": "Change Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "",
                "type": "text"
              },
              {
                "key": "X-User-Id",
                "value": "{{userId}}",
                "description": "Current user UUID from JWT",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/change-password",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "change-password"
              ]
            },
            "description": "Change own password",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"currentPassword\": \"Buyer@123456\",\n  \"newPassword\": \"Buyer@654321\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "My Active Sessions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/users/{userId}/sessions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "users",
                "{userId}",
                "sessions"
              ]
            },
            "description": "View my active sessions"
          },
          "response": []
        }
      ]
    },
    {
      "name": "11. Consent Management",
      "item": [
        {
          "name": "Grant GDPR Consent",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/users/{userId}/consent",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "users",
                "{userId}",
                "consent"
              ]
            },
            "description": "Grant GDPR consent",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"consentType\": \"GDPR\",\n  \"version\": \"2.0\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Grant TOS Consent",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/users/{userId}/consent",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "users",
                "{userId}",
                "consent"
              ]
            },
            "description": "Grant Terms of Service consent",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"consentType\": \"TOS\",\n  \"version\": \"1.0\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "View My Consent Records",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/users/{userId}/consent",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "users",
                "{userId}",
                "consent"
              ]
            },
            "description": "View consent history"
          },
          "response": []
        }
      ]
    },
    {
      "name": "12. Logout",
      "item": [
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "JWT Access Token",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/logout",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "logout"
              ]
            },
            "description": "Logout \u2014 blacklist tokens",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        }
      ]
    }
  ]
}